<!DOCTYPE html>
<html>
<head>
	
	<title>Mini Editor Foto</title>
	<style type="text/css">
        html, body {
            width:100%;
            height:100%;
            overflow:hidden;
            background-color: papayawhip;
        }
    
        .w3-bar-item img{
            width: 50%;
            height: 50%;
            margin-left: 25%;
        }
    
        canvas{
			position: relative;
			border: 1px solid #000;
        }

		#my-canvas{
			width:700;
			height:600;
            margin-left: 75;
            margin-bottom:20;
            overflow:hidden;
            background-color: #8C001A;
            float: left;
            left: 0;
		}
    
        .w3-sidebar{
			width:100px;
            float:left;
            background-color: grey;
            overflow: hidden;
            height: 1200px;
        }
    
        .w3-button{
            color: #8C001A;
            size:50px;
        }
    
        .w3-bar-item{
            size:30px;
        }
    
        #stuffToShow {
            display:none;
        }
    
        .checkbox {
            opacity:0.01;
            position: absolute;
            height: 50px;
        }
        

        #checkbox:checked + #stuffToShow {
            display:block;
            position: fixed;
            top:10px;
            left:100px;
            height: 50px;
        }


        #checkbox2:checked + #stuffToShow {
            display:block;
            position: fixed;
            top:60px;
            left:100px;
            height: 50px;
        }

        #stuffToShow .w3-sidebar {
            width: 50px;
            float: left;
            height: auto;
            background-color: white;
            padding: 2px; 
        }
    
        #stuffToShow .w3-sidebar img{
            width: 120%;
            height: 120%;
            margin: 0px;
        }

		#page-footer{
			position: fixed;
			bottom: 0px;
			float:left;
			margin-left: 300px;
		}

	</style>
</head>

<body>
	
			    <div class="w3-sidebar w3-bar-block" style="width:100px"> 
			        <div class="w3-bar-item w3-button" name="desenare" id="desenare">
			            <label for="checkbox" id="checkboxLabel"><img src="Media/desenare.png"></label>
			            <input type="checkbox" class="checkbox" id="checkbox" />
			            <div id="stuffToShow">
			                    <div class="w3-sidebar w3-bar-block"> 
			                    <a href="#" id="pensula" class="w3-bar-item w3-button"><img src="Media/pensula.jpg"></a>
								<a href="#" id="linie" class="w3-bar-item w3-button"><img src="Media/linie.png"></a>
								<a href="#" id="dreptunghi" class="w3-bar-item w3-button"><img src="Media/dreptunghi.png"></a>
			                </div>
			            </div>
			        </div>
			        
			        <div class="w3-bar-item w3-button" name="selectie" id="selectie">
			            <label for="checkbox2" id="checkboxLabel2"><img src="Media/selectie.png"></label>
			            <input type="checkbox" class="checkbox" id="checkbox2" />
			            <div id="stuffToShow">
			                    <div class="w3-sidebar w3-bar-block"> 
			                    <a href="#" class="w3-bar-item w3-button"><img src="Media/desenare.png"></a>
			                    <a href="#" class="w3-bar-item w3-button"><img src="Media/desenare.png"></a>
			                </div>
			            </div>
			        </div>
			        
			        <div class="w3-bar-item w3-button" name="crop" id="crop">
			            <label for="checkbox3" id="checkboxLabel3"><img src="Media/crop.png"></label>
			            <input type="checkbox" class="checkbox" id="checkbox3" />
			        </div>
			        
			        <div class="w3-bar-item w3-button" name="scalare" id="scalare">
			            <label for="checkbox4" id="checkboxLabel4"><img src="Media/scalare.png"></label>
			            <input type="checkbox" class="checkbox" id="checkbox4" />
			        </div>

			        <div class="w3-bar-item w3-button" name="salvare" id="salvare">
			            <label for="checkbox5" id="checkboxLabel5"><img src="Media/salvare.png"></label>
			            <input type="checkbox" class="checkbox" id="checkbox5" />
					</div>
					
					<div class="w3-bar-item w3-button" name="pipeta" id="pipeta">
			            <label for="checkbox6" id="checkboxLabel6"><img src="Media/pipeta.png"></label>
			            <input type="checkbox" class="checkbox" id="checkbox6" />
			        </div>

			      </div>
	<div id="container">
				
		<div role="main">
			<section id="main-content">
				
				<canvas id="my-canvas" width="700" height="600">Eu sunt canvas-ul.</canvas>
        		
				<script>
					(function () {
						var canvas = document.getElementById("my-canvas"),
						context = canvas.getContext("2d"),
						img = document.createElement("img"),
						mouseDown = false,
						brushColor = "rgb(0, 0, 0)",
						hasText = true,
						clearCanvas = function () {
							if (hasText) {
								context.clearRect(0, 0, canvas.width, canvas.height);
								hasText = false;
							}
						};

						function sunet(src) {
    						this.sound = document.createElement("audio");
    						this.sound.src = src;
    						this.sound.setAttribute("preload", "auto");
    						this.sound.setAttribute("controls", "none");
    						this.sound.style.display = "none";
    						document.body.appendChild(this.sound);
    						this.play = function(){
       							this.sound.play();
    						}
    						this.stop = function(){
        						this.sound.pause();
    						}    
						}

							
						// Adding instructions
						context.fillText("Trage o imagine in canvas", 240, 200);
						context.fillText("Apasa pe un loc din iamgine ca se setezi culoarea pensulei.", 240, 220);
						
						// Image for loading	
						img.addEventListener("load", function () {
							clearCanvas();
							context.drawImage(img, 0, 0);
						}, false);
						
						// Detect mousedown
						checkbox6.addEventListener("change", function (e) {
							var check_sunet = new sunet("Media/pipeta.wav");
							check_sunet.play(); 
							var check = document.getElementById("checkbox6");
							
								canvas.addEventListener("mousedown", function (evt) {
										clearCanvas();
										mouseDown = true;
										context.beginPath();
								}, false);
								
								// Detect mouseup
								canvas.addEventListener("mouseup", function (evt) {
										mouseDown = false;
										var colors = context.getImageData(evt.layerX, evt.layerY, 1, 1).data;
										if(check.checked==true) {
											brushColor = "rgb(" + colors[0] + ", " + colors[1] + ", " + colors[2] + ")";
											check.checked=false;
										}
								}, false);
						}, false);
						
						// Draw, if mouse button is pressed
						pensula.addEventListener("click", function(e){ 
							var pensula_sunet = new sunet("Media/pensula.wav");
							var desenare_sunet = new sunet("Media/desenare_pensula.wav");
							pensula_sunet.play(); 
							
							canvas.addEventListener("mousemove", function (evt) {
								if (mouseDown) {
									desenare_sunet.play();
									context.strokeStyle = brushColor;								
									context.lineWidth = 20;
									context.lineJoin = "round";
									context.lineTo(evt.layerX+1, evt.layerY+1);
									context.stroke();
								}
							}, false); 
							
						}, false);

						// To enable drag and drop
						canvas.addEventListener("dragover", function (evt) {
							evt.preventDefault();
						}, false);

						// Handle dropped image file - only Firefox and Google Chrome
						canvas.addEventListener("drop", function (evt) {
							var files = evt.dataTransfer.files;
							if (files.length > 0) {
								var file = files[0];
								if (typeof FileReader !== "undefined" && file.type.indexOf("image") != -1) {
									var reader = new FileReader();
									// Note: addEventListener doesn't work in Google Chrome for this event
									reader.onload = function (evt) {
										img.src = evt.target.result;
									};
									reader.readAsDataURL(file);
								}
							}
							evt.preventDefault();
						}, false);
						
						// Save image
						var saveImage = document.getElementById("checkbox5");
						saveImage.innerHTML = "Save canvas";
						saveImage.addEventListener("click", function (evt) {
							window.open(canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"));
							evt.preventDefault();
						}, false);
						document.getElementById("main-content").appendChild(saveImage);
					})();
				</script>
			</section>
		</div>
		
		<footer id="page-footer" role="contentinfo">
			Creat de Andreuta uta
		</footer>
	</div>
	
	
	

</body></html>